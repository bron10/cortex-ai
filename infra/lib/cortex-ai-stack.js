"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CortexAIStack = void 0;
const cdk = require("aws-cdk-lib");
const cortex_ai_1 = require("./cortex-ai");
class CortexAIStack extends cdk.Stack {
    constructor(scope, id, props = {}) {
        super(scope, id, props);
        const applicationName = props.applicationName || 'cortex-ai';
        const environment = props.environment || 'dev';
        // Create the CortexAI construct
        this.cortexAI = new cortex_ai_1.CortexAI(this, 'CortexAI', {
            applicationName,
            environment,
            enableAIInsights: props.enableAIInsights,
            cognitoConfig: props.cognitoConfig,
            dynamoConfig: props.dynamoConfig ? {
                billingMode: props.dynamoConfig.billingMode === 'PROVISIONED'
                    ? cdk.aws_dynamodb.BillingMode.PROVISIONED
                    : cdk.aws_dynamodb.BillingMode.PAY_PER_REQUEST,
                removalPolicy: props.dynamoConfig.removalPolicy === 'RETAIN'
                    ? cdk.RemovalPolicy.RETAIN
                    : props.dynamoConfig.removalPolicy === 'SNAPSHOT'
                        ? cdk.RemovalPolicy.SNAPSHOT
                        : cdk.RemovalPolicy.DESTROY,
            } : undefined,
            s3Config: props.s3Config ? {
                removalPolicy: props.s3Config.removalPolicy === 'RETAIN'
                    ? cdk.RemovalPolicy.RETAIN
                    : props.s3Config.removalPolicy === 'SNAPSHOT'
                        ? cdk.RemovalPolicy.SNAPSHOT
                        : cdk.RemovalPolicy.DESTROY,
                versioned: props.s3Config.versioned,
            } : undefined,
        });
        // Add tags to all resources
        cdk.Tags.of(this).add('Application', applicationName);
        cdk.Tags.of(this).add('Environment', environment);
        cdk.Tags.of(this).add('ManagedBy', 'CDK');
        cdk.Tags.of(this).add('Owner', 'CortexAI Team');
    }
}
exports.CortexAIStack = CortexAIStack;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29ydGV4LWFpLXN0YWNrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY29ydGV4LWFpLXN0YWNrLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLG1DQUFtQztBQUVuQywyQ0FBdUM7QUE4Q3ZDLE1BQWEsYUFBYyxTQUFRLEdBQUcsQ0FBQyxLQUFLO0lBRzFDLFlBQVksS0FBZ0IsRUFBRSxFQUFVLEVBQUUsUUFBNEIsRUFBRTtRQUN0RSxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUV4QixNQUFNLGVBQWUsR0FBRyxLQUFLLENBQUMsZUFBZSxJQUFJLFdBQVcsQ0FBQztRQUM3RCxNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsV0FBVyxJQUFJLEtBQUssQ0FBQztRQUUvQyxnQ0FBZ0M7UUFDaEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLG9CQUFRLENBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRTtZQUM3QyxlQUFlO1lBQ2YsV0FBVztZQUNYLGdCQUFnQixFQUFFLEtBQUssQ0FBQyxnQkFBZ0I7WUFDeEMsYUFBYSxFQUFFLEtBQUssQ0FBQyxhQUFhO1lBQ2xDLFlBQVksRUFBRSxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztnQkFDakMsV0FBVyxFQUFFLEtBQUssQ0FBQyxZQUFZLENBQUMsV0FBVyxLQUFLLGFBQWE7b0JBQzNELENBQUMsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxXQUFXO29CQUMxQyxDQUFDLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsZUFBZTtnQkFDaEQsYUFBYSxFQUFFLEtBQUssQ0FBQyxZQUFZLENBQUMsYUFBYSxLQUFLLFFBQVE7b0JBQzFELENBQUMsQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLE1BQU07b0JBQzFCLENBQUMsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLGFBQWEsS0FBSyxVQUFVO3dCQUMvQyxDQUFDLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxRQUFRO3dCQUM1QixDQUFDLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxPQUFPO2FBQ2hDLENBQUMsQ0FBQyxDQUFDLFNBQVM7WUFDYixRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7Z0JBQ3pCLGFBQWEsRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLGFBQWEsS0FBSyxRQUFRO29CQUN0RCxDQUFDLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxNQUFNO29CQUMxQixDQUFDLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxhQUFhLEtBQUssVUFBVTt3QkFDM0MsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsUUFBUTt3QkFDNUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsT0FBTztnQkFDL0IsU0FBUyxFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsU0FBUzthQUNwQyxDQUFDLENBQUMsQ0FBQyxTQUFTO1NBQ2QsQ0FBQyxDQUFDO1FBRUgsNEJBQTRCO1FBQzVCLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsZUFBZSxDQUFDLENBQUM7UUFDdEQsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxXQUFXLENBQUMsQ0FBQztRQUNsRCxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsZUFBZSxDQUFDLENBQUM7SUFDbEQsQ0FBQztDQUNGO0FBekNELHNDQXlDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGNkayBmcm9tICdhd3MtY2RrLWxpYic7XG5pbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tICdjb25zdHJ1Y3RzJztcbmltcG9ydCB7IENvcnRleEFJIH0gZnJvbSAnLi9jb3J0ZXgtYWknO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvcnRleEFJU3RhY2tQcm9wcyBleHRlbmRzIGNkay5TdGFja1Byb3BzIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBhcHBsaWNhdGlvblxuICAgKiBAZGVmYXVsdCAnY29ydGV4LWFpJ1xuICAgKi9cbiAgcmVhZG9ubHkgYXBwbGljYXRpb25OYW1lPzogc3RyaW5nO1xuICBcbiAgLyoqXG4gICAqIEVudmlyb25tZW50IG5hbWUgKGRldiwgc3RhZ2luZywgcHJvZClcbiAgICogQGRlZmF1bHQgJ2RldidcbiAgICovXG4gIHJlYWRvbmx5IGVudmlyb25tZW50Pzogc3RyaW5nO1xuICBcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZW5hYmxlIEFJIGluc2lnaHRzIHVzaW5nIEFtYXpvbiBCZWRyb2NrXG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG4gIHJlYWRvbmx5IGVuYWJsZUFJSW5zaWdodHM/OiBib29sZWFuO1xuICBcbiAgLyoqXG4gICAqIENvZ25pdG8gdXNlciBwb29sIGNvbmZpZ3VyYXRpb25cbiAgICovXG4gIHJlYWRvbmx5IGNvZ25pdG9Db25maWc/OiB7XG4gICAgcmVhZG9ubHkgdXNlclBvb2xOYW1lPzogc3RyaW5nO1xuICAgIHJlYWRvbmx5IHVzZXJQb29sQ2xpZW50TmFtZT86IHN0cmluZztcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBEeW5hbW9EQiB0YWJsZSBjb25maWd1cmF0aW9uXG4gICAqL1xuICByZWFkb25seSBkeW5hbW9Db25maWc/OiB7XG4gICAgcmVhZG9ubHkgYmlsbGluZ01vZGU/OiAnUEFZX1BFUl9SRVFVRVNUJyB8ICdQUk9WSVNJT05FRCc7XG4gICAgcmVhZG9ubHkgcmVtb3ZhbFBvbGljeT86ICdERVNUUk9ZJyB8ICdSRVRBSU4nIHwgJ1NOQVBTSE9UJztcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBTMyBidWNrZXQgY29uZmlndXJhdGlvblxuICAgKi9cbiAgcmVhZG9ubHkgczNDb25maWc/OiB7XG4gICAgcmVhZG9ubHkgcmVtb3ZhbFBvbGljeT86ICdERVNUUk9ZJyB8ICdSRVRBSU4nIHwgJ1NOQVBTSE9UJztcbiAgICByZWFkb25seSB2ZXJzaW9uZWQ/OiBib29sZWFuO1xuICB9O1xufVxuXG5leHBvcnQgY2xhc3MgQ29ydGV4QUlTdGFjayBleHRlbmRzIGNkay5TdGFjayB7XG4gIHB1YmxpYyByZWFkb25seSBjb3J0ZXhBSTogQ29ydGV4QUk7XG5cbiAgY29uc3RydWN0b3Ioc2NvcGU6IENvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IENvcnRleEFJU3RhY2tQcm9wcyA9IHt9KSB7XG4gICAgc3VwZXIoc2NvcGUsIGlkLCBwcm9wcyk7XG5cbiAgICBjb25zdCBhcHBsaWNhdGlvbk5hbWUgPSBwcm9wcy5hcHBsaWNhdGlvbk5hbWUgfHwgJ2NvcnRleC1haSc7XG4gICAgY29uc3QgZW52aXJvbm1lbnQgPSBwcm9wcy5lbnZpcm9ubWVudCB8fCAnZGV2JztcblxuICAgIC8vIENyZWF0ZSB0aGUgQ29ydGV4QUkgY29uc3RydWN0XG4gICAgdGhpcy5jb3J0ZXhBSSA9IG5ldyBDb3J0ZXhBSSh0aGlzLCAnQ29ydGV4QUknLCB7XG4gICAgICBhcHBsaWNhdGlvbk5hbWUsXG4gICAgICBlbnZpcm9ubWVudCxcbiAgICAgIGVuYWJsZUFJSW5zaWdodHM6IHByb3BzLmVuYWJsZUFJSW5zaWdodHMsXG4gICAgICBjb2duaXRvQ29uZmlnOiBwcm9wcy5jb2duaXRvQ29uZmlnLFxuICAgICAgZHluYW1vQ29uZmlnOiBwcm9wcy5keW5hbW9Db25maWcgPyB7XG4gICAgICAgIGJpbGxpbmdNb2RlOiBwcm9wcy5keW5hbW9Db25maWcuYmlsbGluZ01vZGUgPT09ICdQUk9WSVNJT05FRCcgXG4gICAgICAgICAgPyBjZGsuYXdzX2R5bmFtb2RiLkJpbGxpbmdNb2RlLlBST1ZJU0lPTkVEIFxuICAgICAgICAgIDogY2RrLmF3c19keW5hbW9kYi5CaWxsaW5nTW9kZS5QQVlfUEVSX1JFUVVFU1QsXG4gICAgICAgIHJlbW92YWxQb2xpY3k6IHByb3BzLmR5bmFtb0NvbmZpZy5yZW1vdmFsUG9saWN5ID09PSAnUkVUQUlOJyBcbiAgICAgICAgICA/IGNkay5SZW1vdmFsUG9saWN5LlJFVEFJTiBcbiAgICAgICAgICA6IHByb3BzLmR5bmFtb0NvbmZpZy5yZW1vdmFsUG9saWN5ID09PSAnU05BUFNIT1QnIFxuICAgICAgICAgICAgPyBjZGsuUmVtb3ZhbFBvbGljeS5TTkFQU0hPVCBcbiAgICAgICAgICAgIDogY2RrLlJlbW92YWxQb2xpY3kuREVTVFJPWSxcbiAgICAgIH0gOiB1bmRlZmluZWQsXG4gICAgICBzM0NvbmZpZzogcHJvcHMuczNDb25maWcgPyB7XG4gICAgICAgIHJlbW92YWxQb2xpY3k6IHByb3BzLnMzQ29uZmlnLnJlbW92YWxQb2xpY3kgPT09ICdSRVRBSU4nIFxuICAgICAgICAgID8gY2RrLlJlbW92YWxQb2xpY3kuUkVUQUlOIFxuICAgICAgICAgIDogcHJvcHMuczNDb25maWcucmVtb3ZhbFBvbGljeSA9PT0gJ1NOQVBTSE9UJyBcbiAgICAgICAgICAgID8gY2RrLlJlbW92YWxQb2xpY3kuU05BUFNIT1QgXG4gICAgICAgICAgICA6IGNkay5SZW1vdmFsUG9saWN5LkRFU1RST1ksXG4gICAgICAgIHZlcnNpb25lZDogcHJvcHMuczNDb25maWcudmVyc2lvbmVkLFxuICAgICAgfSA6IHVuZGVmaW5lZCxcbiAgICB9KTtcblxuICAgIC8vIEFkZCB0YWdzIHRvIGFsbCByZXNvdXJjZXNcbiAgICBjZGsuVGFncy5vZih0aGlzKS5hZGQoJ0FwcGxpY2F0aW9uJywgYXBwbGljYXRpb25OYW1lKTtcbiAgICBjZGsuVGFncy5vZih0aGlzKS5hZGQoJ0Vudmlyb25tZW50JywgZW52aXJvbm1lbnQpO1xuICAgIGNkay5UYWdzLm9mKHRoaXMpLmFkZCgnTWFuYWdlZEJ5JywgJ0NESycpO1xuICAgIGNkay5UYWdzLm9mKHRoaXMpLmFkZCgnT3duZXInLCAnQ29ydGV4QUkgVGVhbScpO1xuICB9XG59XG4iXX0=