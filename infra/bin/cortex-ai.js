#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("aws-cdk-lib");
const cortex_ai_stack_1 = require("../lib/cortex-ai-stack");
const app = new cdk.App();
// Get environment from context or use default
const environment = app.node.tryGetContext('environment') || 'dev';
const applicationName = app.node.tryGetContext('applicationName') || 'cortex-ai';
const enableAIInsights = app.node.tryGetContext('enableAIInsights') !== false;
// Get AWS account and region
const account = process.env.CDK_DEFAULT_ACCOUNT;
const region = process.env.CDK_DEFAULT_REGION;
if (!account || !region) {
    throw new Error('CDK_DEFAULT_ACCOUNT and CDK_DEFAULT_REGION environment variables must be set');
}
// Create the main stack
const cortexAIStack = new cortex_ai_stack_1.CortexAIStack(app, `${applicationName}-${environment}-stack`, {
    applicationName,
    environment,
    enableAIInsights,
    env: {
        account,
        region,
    },
    description: `CortexAI Multi-tenant Platform - ${environment} environment`,
    stackName: `${applicationName}-${environment}`,
});
// Add stack tags
cdk.Tags.of(cortexAIStack).add('Application', applicationName);
cdk.Tags.of(cortexAIStack).add('Environment', environment);
cdk.Tags.of(cortexAIStack).add('ManagedBy', 'CDK');
cdk.Tags.of(cortexAIStack).add('Owner', 'CortexAI Team');
// Output the stack name for reference
console.log(`Deploying CortexAI stack: ${cortexAIStack.stackName}`);
console.log(`Environment: ${environment}`);
console.log(`AI Insights enabled: ${enableAIInsights}`);
console.log(`Account: ${account}`);
console.log(`Region: ${region}`);
app.synth();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29ydGV4LWFpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY29ydGV4LWFpLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHVDQUFxQztBQUNyQyxtQ0FBbUM7QUFDbkMsNERBQXVEO0FBRXZELE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBRTFCLDhDQUE4QztBQUM5QyxNQUFNLFdBQVcsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsSUFBSSxLQUFLLENBQUM7QUFDbkUsTUFBTSxlQUFlLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsaUJBQWlCLENBQUMsSUFBSSxXQUFXLENBQUM7QUFDakYsTUFBTSxnQkFBZ0IsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLEtBQUssQ0FBQztBQUU5RSw2QkFBNkI7QUFDN0IsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQztBQUNoRCxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDO0FBRTlDLElBQUksQ0FBQyxPQUFPLElBQUksQ0FBQyxNQUFNLEVBQUU7SUFDdkIsTUFBTSxJQUFJLEtBQUssQ0FBQyw4RUFBOEUsQ0FBQyxDQUFDO0NBQ2pHO0FBRUQsd0JBQXdCO0FBQ3hCLE1BQU0sYUFBYSxHQUFHLElBQUksK0JBQWEsQ0FBQyxHQUFHLEVBQUUsR0FBRyxlQUFlLElBQUksV0FBVyxRQUFRLEVBQUU7SUFDdEYsZUFBZTtJQUNmLFdBQVc7SUFDWCxnQkFBZ0I7SUFDaEIsR0FBRyxFQUFFO1FBQ0gsT0FBTztRQUNQLE1BQU07S0FDUDtJQUNELFdBQVcsRUFBRSxvQ0FBb0MsV0FBVyxjQUFjO0lBQzFFLFNBQVMsRUFBRSxHQUFHLGVBQWUsSUFBSSxXQUFXLEVBQUU7Q0FDL0MsQ0FBQyxDQUFDO0FBRUgsaUJBQWlCO0FBQ2pCLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDL0QsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxXQUFXLENBQUMsQ0FBQztBQUMzRCxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ25ELEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFFekQsc0NBQXNDO0FBQ3RDLE9BQU8sQ0FBQyxHQUFHLENBQUMsNkJBQTZCLGFBQWEsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDO0FBQ3BFLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLFdBQVcsRUFBRSxDQUFDLENBQUM7QUFDM0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDO0FBQ3hELE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxPQUFPLEVBQUUsQ0FBQyxDQUFDO0FBQ25DLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxNQUFNLEVBQUUsQ0FBQyxDQUFDO0FBRWpDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIiMhL3Vzci9iaW4vZW52IG5vZGVcbmltcG9ydCAnc291cmNlLW1hcC1zdXBwb3J0L3JlZ2lzdGVyJztcbmltcG9ydCAqIGFzIGNkayBmcm9tICdhd3MtY2RrLWxpYic7XG5pbXBvcnQgeyBDb3J0ZXhBSVN0YWNrIH0gZnJvbSAnLi4vbGliL2NvcnRleC1haS1zdGFjayc7XG5cbmNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XG5cbi8vIEdldCBlbnZpcm9ubWVudCBmcm9tIGNvbnRleHQgb3IgdXNlIGRlZmF1bHRcbmNvbnN0IGVudmlyb25tZW50ID0gYXBwLm5vZGUudHJ5R2V0Q29udGV4dCgnZW52aXJvbm1lbnQnKSB8fCAnZGV2JztcbmNvbnN0IGFwcGxpY2F0aW9uTmFtZSA9IGFwcC5ub2RlLnRyeUdldENvbnRleHQoJ2FwcGxpY2F0aW9uTmFtZScpIHx8ICdjb3J0ZXgtYWknO1xuY29uc3QgZW5hYmxlQUlJbnNpZ2h0cyA9IGFwcC5ub2RlLnRyeUdldENvbnRleHQoJ2VuYWJsZUFJSW5zaWdodHMnKSAhPT0gZmFsc2U7XG5cbi8vIEdldCBBV1MgYWNjb3VudCBhbmQgcmVnaW9uXG5jb25zdCBhY2NvdW50ID0gcHJvY2Vzcy5lbnYuQ0RLX0RFRkFVTFRfQUNDT1VOVDtcbmNvbnN0IHJlZ2lvbiA9IHByb2Nlc3MuZW52LkNES19ERUZBVUxUX1JFR0lPTjtcblxuaWYgKCFhY2NvdW50IHx8ICFyZWdpb24pIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdDREtfREVGQVVMVF9BQ0NPVU5UIGFuZCBDREtfREVGQVVMVF9SRUdJT04gZW52aXJvbm1lbnQgdmFyaWFibGVzIG11c3QgYmUgc2V0Jyk7XG59XG5cbi8vIENyZWF0ZSB0aGUgbWFpbiBzdGFja1xuY29uc3QgY29ydGV4QUlTdGFjayA9IG5ldyBDb3J0ZXhBSVN0YWNrKGFwcCwgYCR7YXBwbGljYXRpb25OYW1lfS0ke2Vudmlyb25tZW50fS1zdGFja2AsIHtcbiAgYXBwbGljYXRpb25OYW1lLFxuICBlbnZpcm9ubWVudCxcbiAgZW5hYmxlQUlJbnNpZ2h0cyxcbiAgZW52OiB7XG4gICAgYWNjb3VudCxcbiAgICByZWdpb24sXG4gIH0sXG4gIGRlc2NyaXB0aW9uOiBgQ29ydGV4QUkgTXVsdGktdGVuYW50IFBsYXRmb3JtIC0gJHtlbnZpcm9ubWVudH0gZW52aXJvbm1lbnRgLFxuICBzdGFja05hbWU6IGAke2FwcGxpY2F0aW9uTmFtZX0tJHtlbnZpcm9ubWVudH1gLFxufSk7XG5cbi8vIEFkZCBzdGFjayB0YWdzXG5jZGsuVGFncy5vZihjb3J0ZXhBSVN0YWNrKS5hZGQoJ0FwcGxpY2F0aW9uJywgYXBwbGljYXRpb25OYW1lKTtcbmNkay5UYWdzLm9mKGNvcnRleEFJU3RhY2spLmFkZCgnRW52aXJvbm1lbnQnLCBlbnZpcm9ubWVudCk7XG5jZGsuVGFncy5vZihjb3J0ZXhBSVN0YWNrKS5hZGQoJ01hbmFnZWRCeScsICdDREsnKTtcbmNkay5UYWdzLm9mKGNvcnRleEFJU3RhY2spLmFkZCgnT3duZXInLCAnQ29ydGV4QUkgVGVhbScpO1xuXG4vLyBPdXRwdXQgdGhlIHN0YWNrIG5hbWUgZm9yIHJlZmVyZW5jZVxuY29uc29sZS5sb2coYERlcGxveWluZyBDb3J0ZXhBSSBzdGFjazogJHtjb3J0ZXhBSVN0YWNrLnN0YWNrTmFtZX1gKTtcbmNvbnNvbGUubG9nKGBFbnZpcm9ubWVudDogJHtlbnZpcm9ubWVudH1gKTtcbmNvbnNvbGUubG9nKGBBSSBJbnNpZ2h0cyBlbmFibGVkOiAke2VuYWJsZUFJSW5zaWdodHN9YCk7XG5jb25zb2xlLmxvZyhgQWNjb3VudDogJHthY2NvdW50fWApO1xuY29uc29sZS5sb2coYFJlZ2lvbjogJHtyZWdpb259YCk7XG5cbmFwcC5zeW50aCgpO1xuIl19